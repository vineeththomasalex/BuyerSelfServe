import { PhaseDefinition } from '../types';

export const phases: PhaseDefinition[] = [
  {
    id: 'pre-offer',
    number: 1,
    name: 'Pre-Offer Preparation',
    shortName: 'PRE-OFFER',
    description: 'Gather information and prepare before submitting an offer',
    stageId: 'offer-prep',
    typicalDaysStart: -30,
    typicalDaysEnd: -1,
    tasks: [
      {
        id: 'pre-1',
        title: 'Get pre-approved for mortgage',
        description: 'Obtain a pre-approval letter from a lender showing how much you can borrow',
        instructions: [
          'Contact 2-3 lenders to compare rates',
          'Gather required documents: W-2s, pay stubs, bank statements, tax returns',
          'Submit application and documentation',
          'Receive pre-approval letter',
        ],
        taskType: 'paperwork',
        dependsOn: [],
        externalDependency: 'Lender processing',
        userTimeEstimate: '2-4 hours',
        externalWaitTime: '1-5 days',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'pre-2',
        title: 'Research the property',
        description: 'Investigate the property, neighborhood, and any potential issues',
        instructions: [
          'Review property listing details and photos',
          'Check county appraisal district records for tax history',
          'Research neighborhood crime statistics',
          'Check flood zone status on FEMA maps',
          'Drive by property at different times of day',
        ],
        taskType: 'action',
        dependsOn: [],
        externalDependency: null,
        userTimeEstimate: '2-3 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'pre-3',
        title: 'Review seller disclosure',
        description: "Review the Seller's Disclosure Notice if available",
        instructions: [
          'Request Seller Disclosure from listing agent',
          'Review all disclosed conditions and repairs',
          'Note any concerns to investigate during inspection',
          'Understand this is seller\'s knowledge, not a warranty',
        ],
        taskType: 'paperwork',
        dependsOn: [],
        externalDependency: 'Seller/agent provides disclosure',
        userTimeEstimate: '30 min',
        externalWaitTime: '1-3 days',
        condition: null,
        relatedDocuments: ['sellers-disclosure'],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'pre-4',
        title: 'Choose title company',
        description: 'Select a title company to handle closing',
        instructions: [
          'Get recommendations from lender or friends',
          'Compare fees and services',
          'Confirm they can handle your timeline',
          'In Texas, buyer typically chooses title company',
        ],
        taskType: 'action',
        dependsOn: [],
        externalDependency: null,
        userTimeEstimate: '1 hour',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'pre-5',
        title: 'Determine offer terms',
        description: 'Decide on price, earnest money, option fee, and other terms',
        instructions: [
          'Review comparable sales in the area',
          'Decide on offer price',
          'Determine earnest money amount (typically 1% of price)',
          'Determine option fee ($100-500 typical)',
          'Decide on option period length (7-10 days typical)',
          'Consider any special conditions or contingencies',
        ],
        taskType: 'action',
        dependsOn: ['pre-2'],
        externalDependency: null,
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'offer-submit',
    number: 2,
    name: 'Offer Submission',
    shortName: 'OFFER',
    description: 'Prepare and submit your offer to the seller',
    stageId: 'offer-prep',
    typicalDaysStart: -1,
    typicalDaysEnd: 0,
    tasks: [
      {
        id: 'offer-1',
        title: 'Complete TREC contract',
        description: 'Fill out the One to Four Family Residential Contract (Resale)',
        instructions: [
          'Download TREC 20-17 form',
          'Fill in all buyer information',
          'Enter property address and legal description',
          'Specify sales price and financing terms',
          'Set option fee and option period length',
          'Set earnest money amount',
          'Specify closing date (typically 30-45 days)',
          'Review all addenda needed',
        ],
        taskType: 'paperwork',
        dependsOn: ['pre-1', 'pre-5'],
        externalDependency: null,
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: ['trec-contract'],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'offer-2',
        title: 'Complete Third Party Financing Addendum',
        description: 'Attach financing addendum if getting a loan',
        instructions: [
          'Download TREC 40-9 form',
          'Specify loan type (Conventional, FHA, VA, etc.)',
          'Enter loan amount and interest rate cap',
          'Set financing approval deadline',
        ],
        taskType: 'paperwork',
        dependsOn: ['offer-1'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: { type: 'has_loan' },
        relatedDocuments: ['financing-addendum'],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'offer-3',
        title: 'Complete HOA Addendum',
        description: 'Attach HOA addendum if property has HOA',
        instructions: [
          'Download TREC 36-9 form',
          'Specify HOA review period',
          'Request HOA documents from seller',
        ],
        taskType: 'paperwork',
        dependsOn: ['offer-1'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: { type: 'has_hoa' },
        relatedDocuments: ['hoa-addendum'],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'offer-4',
        title: 'Submit offer to seller',
        description: 'Send the completed contract and addenda to seller or listing agent',
        instructions: [
          'Compile all documents into one package',
          'Include pre-approval letter',
          'Email to listing agent or seller',
          'Request confirmation of receipt',
          'Note: As unrepresented buyer, you communicate directly',
        ],
        taskType: 'action',
        dependsOn: ['offer-1'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'execution',
    number: 3,
    name: 'Contract Execution',
    shortName: 'EXEC',
    description: 'Negotiate and execute the contract (Day 0)',
    stageId: 'offer-prep',
    typicalDaysStart: 0,
    typicalDaysEnd: 0,
    tasks: [
      {
        id: 'exec-1',
        title: 'Negotiate counter-offers',
        description: 'Review and respond to any counter-offers from seller',
        instructions: [
          'Review seller counter-offer carefully',
          'Consult with lender if terms affect financing',
          'Decide to accept, reject, or counter',
          'Document all changes in writing',
        ],
        taskType: 'waiting',
        dependsOn: ['offer-4'],
        externalDependency: 'Seller response',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '1-3 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'exec-2',
        title: 'Sign final contract',
        description: 'Sign the agreed-upon contract',
        instructions: [
          'Review final contract terms',
          'Initial all pages',
          'Sign and date the contract',
          'Keep copy of fully executed contract',
        ],
        taskType: 'paperwork',
        dependsOn: ['exec-1'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: ['trec-contract'],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'exec-3',
        title: 'Receive fully executed contract',
        description: 'Obtain copy signed by all parties - this sets the Effective Date',
        instructions: [
          'Confirm seller has signed',
          'Obtain copy with all signatures',
          'Note the Effective Date (last party to sign)',
          'This date starts all contract deadlines',
        ],
        taskType: 'waiting',
        dependsOn: ['exec-2'],
        externalDependency: 'Seller signature',
        userTimeEstimate: '15 min',
        externalWaitTime: '1-2 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'exec-4',
        title: 'Record effective date',
        description: 'Note the effective date and calculate all deadlines',
        instructions: [
          'Effective date = date last party signed',
          'Calculate option period end date',
          'Calculate financing deadline',
          'Calculate closing date',
          'Set calendar reminders for all deadlines',
        ],
        taskType: 'action',
        dependsOn: ['exec-3'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'exec-5',
        title: 'Send contract to title company',
        description: 'Deliver executed contract to title company to open escrow',
        instructions: [
          'Email fully executed contract to title company',
          'Include all addenda',
          'Confirm receipt and escrow number',
          'Get earnest money delivery instructions',
        ],
        taskType: 'action',
        dependsOn: ['exec-3', 'pre-4'],
        externalDependency: null,
        userTimeEstimate: '15 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'exec-6',
        title: 'Send contract to lender',
        description: 'Deliver executed contract to lender to start loan process',
        instructions: [
          'Email fully executed contract to loan officer',
          'Include all addenda',
          'Confirm loan application is complete',
          'Ask about next steps and timeline',
        ],
        taskType: 'action',
        dependsOn: ['exec-3'],
        externalDependency: null,
        userTimeEstimate: '15 min',
        externalWaitTime: 'N/A',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'option-period',
    number: 4,
    name: 'Option Period',
    shortName: 'OPTION',
    description: 'Inspect property and decide whether to proceed (typically Days 1-10)',
    stageId: 'option-period',
    typicalDaysStart: 1,
    typicalDaysEnd: 10,
    tasks: [
      {
        id: 'opt-1',
        title: 'Deliver option fee',
        description: 'Pay option fee to seller within 3 days of effective date',
        instructions: [
          'Option fee goes directly to SELLER (not title company)',
          'Deliver within 3 days of effective date',
          'Get receipt or confirmation of payment',
          'Keep proof of delivery',
          'Option fee is typically non-refundable but gives you right to terminate',
        ],
        taskType: 'payment',
        dependsOn: ['exec-3'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller',
        deadlineType: 'days_from_effective',
        deadlineDays: 3,
      },
      {
        id: 'opt-2',
        title: 'Deliver earnest money',
        description: 'Deposit earnest money with title company within 3 days',
        instructions: [
          'Earnest money goes to TITLE COMPANY escrow',
          'Deliver within 3 days of effective date',
          'Get receipt from title company',
          'Keep proof of deposit',
          'Earnest money is refundable if you terminate during option period',
        ],
        taskType: 'payment',
        dependsOn: ['exec-5'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'days_from_effective',
        deadlineDays: 3,
      },
      {
        id: 'opt-3',
        title: 'Schedule home inspection',
        description: 'Hire a licensed home inspector',
        instructions: [
          'Find licensed inspectors (ask lender/title for referrals)',
          'Compare prices ($300-500 typical)',
          'Schedule within first few days of option period',
          'Plan to attend the inspection',
        ],
        taskType: 'action',
        dependsOn: ['exec-3'],
        externalDependency: 'Inspector availability',
        userTimeEstimate: '30 min',
        externalWaitTime: '1-3 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'inspector',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'opt-4',
        title: 'Attend home inspection',
        description: 'Be present for the inspection to see issues firsthand',
        instructions: [
          'Plan for 2-4 hours',
          'Walk through with inspector',
          'Ask questions about any concerns',
          'Take notes and photos',
          'Understand this is your main due diligence opportunity',
        ],
        taskType: 'action',
        dependsOn: ['opt-3'],
        externalDependency: 'Scheduled inspection date',
        userTimeEstimate: '2-4 hours',
        externalWaitTime: 'Scheduled date',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'inspector',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'opt-5',
        title: 'Review inspection report',
        description: 'Analyze the inspection report and identify concerns',
        instructions: [
          'Wait for written report from inspector',
          'Review all findings carefully',
          'Categorize: safety issues, major repairs, minor issues',
          'Get repair estimates if needed',
          'Decide what to request from seller',
        ],
        taskType: 'paperwork',
        dependsOn: ['opt-4'],
        externalDependency: 'Inspector delivers report',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '1-2 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'inspector',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'opt-6',
        title: 'Request repairs (Amendment)',
        description: 'Submit repair requests to seller using Amendment form',
        instructions: [
          'Use TREC Amendment form for repair requests',
          'Be specific about what repairs you want',
          'Prioritize safety and major issues',
          'Send to seller/agent in writing',
          'Remember: seller can refuse or counter',
        ],
        taskType: 'paperwork',
        dependsOn: ['opt-5'],
        externalDependency: null,
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: ['amendment'],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'opt-7',
        title: 'Negotiate repair response',
        description: 'Review seller response and negotiate if needed',
        instructions: [
          'Review seller response to repair request',
          'Decide if acceptable',
          'Counter-propose if needed',
          'Get any agreements in writing',
        ],
        taskType: 'waiting',
        dependsOn: ['opt-6'],
        externalDependency: 'Seller response',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '1-3 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'opt-8',
        title: 'DECISION: Proceed or terminate',
        description: 'Make final decision before option period expires',
        instructions: [
          'If proceeding: no action needed, contract continues',
          'If terminating: must give written notice BEFORE option period expires',
          'Use Notice of Buyer Termination form if terminating',
          'Keep proof of delivery if terminating',
          'After option period, you lose right to terminate without penalty',
        ],
        taskType: 'action',
        dependsOn: ['opt-7'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: ['termination-notice'],
        relatedStakeholderRole: null,
        deadlineType: 'days_from_effective',
        deadlineDays: 10,
      },
    ],
  },
  {
    id: 'loan-process',
    number: 5,
    name: 'Loan Processing',
    shortName: 'LOAN',
    description: 'Work with lender to get loan approved (typically Days 1-21)',
    stageId: 'loan-title',
    typicalDaysStart: 1,
    typicalDaysEnd: 21,
    tasks: [
      {
        id: 'loan-1',
        title: 'Complete full loan application',
        description: 'Submit complete loan application with all documentation',
        instructions: [
          'Provide all requested documents to lender',
          'Complete full application if not done at pre-approval',
          'Sign required disclosures',
          'Pay application fee if required',
        ],
        taskType: 'paperwork',
        dependsOn: ['exec-6'],
        externalDependency: null,
        userTimeEstimate: '2-3 hours',
        externalWaitTime: 'N/A',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'loan-2',
        title: 'Order homeowners insurance',
        description: 'Get insurance quotes and bind coverage',
        instructions: [
          'Get quotes from 2-3 insurance companies',
          'Compare coverage and prices',
          'Bind coverage before closing',
          'Provide insurance binder to lender',
        ],
        taskType: 'action',
        dependsOn: ['exec-3'],
        externalDependency: 'Insurance quotes',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '1-3 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'insurance_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'loan-3',
        title: 'Provide additional documents',
        description: 'Respond to lender requests for additional documentation',
        instructions: [
          'Watch for document requests from lender',
          'Respond promptly to all requests',
          'Common requests: explanation letters, additional bank statements',
          'Delays here can delay closing',
        ],
        taskType: 'paperwork',
        dependsOn: ['loan-1'],
        externalDependency: 'Lender requests',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'Ongoing',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'loan-4',
        title: 'Appraisal ordered',
        description: 'Lender orders appraisal of the property',
        instructions: [
          'Lender will order appraisal',
          'Pay appraisal fee (usually $400-600)',
          'Appraiser will contact seller to schedule',
          'Wait for appraisal report',
        ],
        taskType: 'payment',
        dependsOn: ['loan-1'],
        externalDependency: 'Lender orders appraisal',
        userTimeEstimate: '15 min',
        externalWaitTime: '5-10 days',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'appraiser',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'loan-5',
        title: 'Review appraisal',
        description: 'Review appraisal report to ensure value supports loan',
        instructions: [
          'Receive appraisal report from lender',
          'Verify appraised value meets or exceeds purchase price',
          'If low: negotiate with seller, pay difference, or cancel',
          'Understand appraisal contingency in financing addendum',
        ],
        taskType: 'paperwork',
        dependsOn: ['loan-4'],
        externalDependency: 'Appraisal complete',
        userTimeEstimate: '30 min',
        externalWaitTime: '1-2 days after inspection',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'loan-6',
        title: 'Receive loan approval',
        description: 'Get conditional or final loan approval from lender',
        instructions: [
          'Lender issues conditional approval',
          'Review any remaining conditions',
          'Work to clear all conditions',
          'Receive final approval / "clear to close"',
        ],
        taskType: 'waiting',
        dependsOn: ['loan-3', 'loan-5'],
        externalDependency: 'Underwriting review',
        userTimeEstimate: '1 hour',
        externalWaitTime: '3-7 days',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'days_from_effective',
        deadlineDays: 21,
      },
      {
        id: 'loan-7',
        title: 'Receive Closing Disclosure',
        description: 'Review CD at least 3 business days before closing',
        instructions: [
          'Receive Closing Disclosure from lender',
          'Must receive at least 3 business days before closing',
          'Compare to Loan Estimate for changes',
          'Review all fees and terms carefully',
          'Ask questions about anything unclear',
        ],
        taskType: 'paperwork',
        dependsOn: ['loan-6'],
        externalDependency: 'Lender prepares CD',
        userTimeEstimate: '1 hour',
        externalWaitTime: '1-2 days',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'lender',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'title-process',
    number: 6,
    name: 'Title & Escrow',
    shortName: 'TITLE',
    description: 'Title company processes the transaction (Days 1-30)',
    stageId: 'loan-title',
    typicalDaysStart: 1,
    typicalDaysEnd: 30,
    tasks: [
      {
        id: 'title-1',
        title: 'Title search initiated',
        description: 'Title company begins title search and examination',
        instructions: [
          'Title company orders title search',
          'They examine ownership history',
          'Check for liens, judgments, easements',
          'This happens automatically after they receive contract',
        ],
        taskType: 'waiting',
        dependsOn: ['exec-5'],
        externalDependency: 'Title company processing',
        userTimeEstimate: 'N/A',
        externalWaitTime: '7-14 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-2',
        title: 'Review title commitment',
        description: 'Review title commitment for any issues',
        instructions: [
          'Receive title commitment from title company',
          'Review Schedule A: property description, parties',
          'Review Schedule B: exceptions to coverage',
          'Review Schedule C: requirements before closing',
          'Ask about any items you do not understand',
        ],
        taskType: 'paperwork',
        dependsOn: ['title-1'],
        externalDependency: 'Title commitment prepared',
        userTimeEstimate: '1 hour',
        externalWaitTime: '1-2 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-3',
        title: 'Resolve title issues',
        description: 'Work with title company to clear any title problems',
        instructions: [
          'If issues found, title company will work to resolve',
          'May need seller to clear liens',
          'May need legal documents recorded',
          'Common issues: unpaid taxes, old mortgages, judgments',
        ],
        taskType: 'waiting',
        dependsOn: ['title-2'],
        externalDependency: 'Issue resolution',
        userTimeEstimate: 'Varies',
        externalWaitTime: 'Varies',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-4',
        title: 'Review HOA documents',
        description: 'Review HOA resale certificate and governing documents',
        instructions: [
          'Receive HOA documents from seller/title company',
          'Review fees, rules, and restrictions',
          'Check for special assessments',
          'Review financials if available',
          'Can terminate within HOA addendum period if unacceptable',
        ],
        taskType: 'paperwork',
        dependsOn: ['exec-3'],
        externalDependency: 'HOA provides documents',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '3-7 days',
        condition: { type: 'has_hoa' },
        relatedDocuments: ['hoa-addendum'],
        relatedStakeholderRole: 'hoa',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-5',
        title: 'Survey reviewed',
        description: 'Review property survey for boundaries and issues',
        instructions: [
          'Receive survey from title company (new or existing)',
          'Review property boundaries',
          'Check for encroachments',
          'Verify improvements are within boundaries',
          'Note any easements',
        ],
        taskType: 'paperwork',
        dependsOn: ['title-1'],
        externalDependency: 'Survey obtained',
        userTimeEstimate: '30 min',
        externalWaitTime: '7-14 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-6',
        title: 'Confirm closing date and time',
        description: 'Schedule the closing appointment',
        instructions: [
          'Coordinate with title company on date/time',
          'Confirm seller can close same day (or use mail-away)',
          'Verify lender will have funds ready',
          'Plan to bring ID and any required funds',
        ],
        taskType: 'action',
        dependsOn: ['title-2', 'loan-6'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'title-7',
        title: 'Receive settlement statement',
        description: 'Review final settlement statement showing all costs',
        instructions: [
          'Request settlement statement from title company',
          'Review all charges and credits',
          'Compare to estimates received earlier',
          'Calculate exact amount to bring to closing',
          'Report any errors before closing',
        ],
        taskType: 'paperwork',
        dependsOn: ['title-6'],
        externalDependency: 'Title company prepares statement',
        userTimeEstimate: '30 min',
        externalWaitTime: '1-2 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'pre-closing',
    number: 7,
    name: 'Pre-Closing',
    shortName: 'PRE-CLOSE',
    description: 'Final preparations before closing day (Days 25-30)',
    stageId: 'closing',
    typicalDaysStart: 25,
    typicalDaysEnd: 30,
    tasks: [
      {
        id: 'preclose-1',
        title: 'Verify repairs completed',
        description: 'Confirm seller completed agreed-upon repairs',
        instructions: [
          'Request receipts/documentation for repairs',
          'Schedule re-inspection if needed',
          'Verify work was done properly',
          'Address any incomplete items',
        ],
        taskType: 'action',
        dependsOn: ['opt-7'],
        externalDependency: 'Seller completes repairs',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'Varies',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-2',
        title: 'Schedule final walkthrough',
        description: 'Arrange walkthrough within 24-48 hours of closing',
        instructions: [
          'Contact seller/agent to schedule',
          'Plan for 30-60 minutes',
          'Best done close to closing time',
          'Verify property condition',
        ],
        taskType: 'action',
        dependsOn: ['title-6'],
        externalDependency: null,
        userTimeEstimate: '15 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-3',
        title: 'Complete final walkthrough',
        description: 'Inspect property one last time before closing',
        instructions: [
          'Verify property is in same condition as contract',
          'Test all appliances and systems',
          'Check that agreed repairs were completed',
          'Verify seller has removed all belongings',
          'Check for any new damage',
          'Document any issues found',
        ],
        taskType: 'action',
        dependsOn: ['preclose-2'],
        externalDependency: 'Scheduled walkthrough time',
        userTimeEstimate: '30-60 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-4',
        title: 'Address walkthrough issues',
        description: 'Resolve any problems found during walkthrough',
        instructions: [
          'If issues found, contact seller/agent immediately',
          'May need to delay closing',
          'May negotiate credit at closing',
          'Document everything in writing',
        ],
        taskType: 'action',
        dependsOn: ['preclose-3'],
        externalDependency: null,
        userTimeEstimate: 'Varies',
        externalWaitTime: 'Varies',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller_agent',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-5',
        title: 'Arrange closing funds',
        description: 'Prepare certified funds for closing',
        instructions: [
          'Get exact amount from title company',
          'Obtain cashier check or arrange wire transfer',
          'Wire typically required for large amounts',
          'BEWARE of wire fraud - verify instructions by phone',
          'Never trust wiring instructions sent only by email',
        ],
        taskType: 'payment',
        dependsOn: ['title-7'],
        externalDependency: null,
        userTimeEstimate: '1 hour',
        externalWaitTime: 'Same day',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-6',
        title: 'Schedule utilities transfer',
        description: 'Arrange for utilities to be in your name',
        instructions: [
          'Contact electric, gas, water companies',
          'Schedule transfer for closing day or day after',
          'May need to pay deposits',
          'Keep seller utilities on until closing',
        ],
        taskType: 'action',
        dependsOn: ['title-6'],
        externalDependency: null,
        userTimeEstimate: '1 hour',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-7',
        title: 'Gather closing documents',
        description: 'Prepare all documents needed for closing',
        instructions: [
          'Government-issued photo ID',
          'Certified funds or wire confirmation',
          'Proof of insurance',
          'Any documents requested by title company',
        ],
        taskType: 'action',
        dependsOn: ['preclose-5'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'preclose-8',
        title: 'Review closing documents in advance',
        description: 'Request and review closing documents before closing day',
        instructions: [
          'Ask title company for documents in advance',
          'Review deed, settlement statement, loan docs',
          'Note any questions or concerns',
          'This saves time at closing',
        ],
        taskType: 'paperwork',
        dependsOn: ['title-7', 'loan-7'],
        externalDependency: 'Documents prepared',
        userTimeEstimate: '1-2 hours',
        externalWaitTime: '1-2 days',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'closing',
    number: 8,
    name: 'Closing Day',
    shortName: 'CLOSE',
    description: 'Sign documents and receive keys',
    stageId: 'closing',
    typicalDaysStart: 30,
    typicalDaysEnd: 30,
    tasks: [
      {
        id: 'close-1',
        title: 'Arrive at closing',
        description: 'Attend closing appointment at title company',
        instructions: [
          'Arrive on time with all required items',
          'Bring photo ID',
          'Bring certified funds',
          'Plan for 1-2 hours',
        ],
        taskType: 'action',
        dependsOn: ['preclose-7'],
        externalDependency: null,
        userTimeEstimate: '15 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-2',
        title: 'Review and sign loan documents',
        description: 'Sign all mortgage and lending documents',
        instructions: [
          'Promissory note (your promise to repay)',
          'Deed of trust (mortgage/security instrument)',
          'Truth in lending disclosure',
          'Other lender required documents',
          'Ask questions about anything unclear',
        ],
        taskType: 'paperwork',
        dependsOn: ['close-1'],
        externalDependency: null,
        userTimeEstimate: '30-45 min',
        externalWaitTime: 'N/A',
        condition: { type: 'has_loan' },
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-3',
        title: 'Review and sign deed',
        description: 'Review the warranty deed transferring ownership',
        instructions: [
          'Verify your name is spelled correctly',
          'Verify property description is correct',
          'This transfers ownership from seller to you',
          'Will be recorded with county after closing',
        ],
        taskType: 'paperwork',
        dependsOn: ['close-1'],
        externalDependency: null,
        userTimeEstimate: '10 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-4',
        title: 'Review final settlement statement',
        description: 'Verify all numbers on settlement statement',
        instructions: [
          'Compare to earlier estimates',
          'Verify prorations (taxes, HOA dues)',
          'Confirm credits and debits',
          'Ask about any unfamiliar charges',
        ],
        taskType: 'paperwork',
        dependsOn: ['close-1'],
        externalDependency: null,
        userTimeEstimate: '15 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-5',
        title: 'Pay closing funds',
        description: 'Deliver certified funds to title company',
        instructions: [
          'Hand over cashier check or confirm wire received',
          'Get receipt',
          'Keep copy for records',
        ],
        taskType: 'payment',
        dependsOn: ['close-4'],
        externalDependency: null,
        userTimeEstimate: '5 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-6',
        title: 'Receive keys',
        description: 'Get keys to your new home',
        instructions: [
          'Receive keys, garage remotes, etc.',
          'Get any access codes',
          'Confirm all keys/remotes work',
          'Congratulations - you own a home!',
        ],
        taskType: 'action',
        dependsOn: ['close-5'],
        externalDependency: 'Funds cleared / recording confirmed',
        userTimeEstimate: '5 min',
        externalWaitTime: 'Same day',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'seller',
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'close-7',
        title: 'Receive closing documents',
        description: 'Get copies of all signed documents',
        instructions: [
          'Title company provides document copies',
          'Keep in safe place',
          'Will receive recorded deed by mail later',
          'Will receive title policy later',
        ],
        taskType: 'paperwork',
        dependsOn: ['close-6'],
        externalDependency: null,
        userTimeEstimate: '5 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
  {
    id: 'post-closing',
    number: 9,
    name: 'Post-Closing',
    shortName: 'POST',
    description: 'After closing tasks',
    stageId: 'closing',
    typicalDaysStart: 31,
    typicalDaysEnd: 60,
    tasks: [
      {
        id: 'post-1',
        title: 'Change locks',
        description: 'Re-key or replace locks for security',
        instructions: [
          'Change all exterior door locks',
          'Consider smart locks if desired',
          'Change garage code if applicable',
          "You don't know who has old keys",
        ],
        taskType: 'action',
        dependsOn: ['close-6'],
        externalDependency: null,
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'post-2',
        title: 'Update address',
        description: 'Update mailing address with important parties',
        instructions: [
          'USPS mail forwarding',
          'Employer',
          'Bank and credit cards',
          'Insurance companies',
          'DMV / voter registration',
          'Subscriptions',
        ],
        taskType: 'action',
        dependsOn: ['close-6'],
        externalDependency: null,
        userTimeEstimate: '1-2 hours',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'post-3',
        title: 'File homestead exemption',
        description: 'Apply for homestead exemption to reduce property taxes',
        instructions: [
          'File with county appraisal district',
          'Deadline: April 30 (or within 1 year of purchase)',
          'Reduces property tax burden',
          'Must be your primary residence',
          'Can file online with most Texas counties',
        ],
        taskType: 'paperwork',
        dependsOn: ['close-6'],
        externalDependency: null,
        userTimeEstimate: '30 min',
        externalWaitTime: 'N/A',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: null,
        deadlineType: 'none',
        deadlineDays: null,
      },
      {
        id: 'post-4',
        title: 'Receive title policy',
        description: "Receive owner's title insurance policy",
        instructions: [
          'Title company mails policy after recording',
          'Keep in safe place with closing documents',
          'Protects you against title defects',
          'Usually arrives 2-4 weeks after closing',
        ],
        taskType: 'waiting',
        dependsOn: ['close-7'],
        externalDependency: 'Title company mails policy',
        userTimeEstimate: '15 min',
        externalWaitTime: '2-4 weeks',
        condition: null,
        relatedDocuments: [],
        relatedStakeholderRole: 'title_company',
        deadlineType: 'none',
        deadlineDays: null,
      },
    ],
  },
];
